<mxfile host="65bd71144e">
    <diagram id="Vanaf956ToXkdfIuTYm2" name="Página-1">
        <mxGraphModel dx="3344" dy="4922" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" background="#FFFFFF" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="5" value="" style="edgeStyle=none;html=1;" parent="1" source="3" target="4" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="336" value="&lt;font style=&quot;font-size: 30px;&quot;&gt;3&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="5" vertex="1" connectable="0">
                    <mxGeometry x="-0.476" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="231" style="edgeStyle=none;html=1;" parent="1" source="3" target="508" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="335" value="2" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=30;" parent="231" vertex="1" connectable="0">
                    <mxGeometry x="-0.7862" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="233" style="edgeStyle=none;html=1;" parent="1" source="3" target="505" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="334" value="1" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=30;" parent="233" vertex="1" connectable="0">
                    <mxGeometry x="-0.3814" y="3" relative="1" as="geometry">
                        <mxPoint x="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="3" value="npm start" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontStyle=1;strokeColor=#005700;fontColor=#ffffff;" parent="1" vertex="1">
                    <mxGeometry x="240" y="-1010" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="238" value="&lt;font style=&quot;font-size: 30px;&quot;&gt;APP BackEnd&lt;/font&gt;" style="swimlane;whiteSpace=wrap;html=1;startSize=90;" parent="1" vertex="1">
                    <mxGeometry x="-2110" y="-750" width="4320" height="2910" as="geometry"/>
                </mxCell>
                <mxCell id="11" value="" style="edgeStyle=none;html=1;" parent="238" source="4" target="10" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="13" value="" style="edgeStyle=none;html=1;" parent="238" source="10" target="12" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="15" value="" style="edgeStyle=none;html=1;" parent="238" source="10" target="14" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="10" value="Disponibiliza as Rotas na rota:&lt;div&gt;3000&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);" parent="238" vertex="1">
                    <mxGeometry x="2310" y="538" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="31" value="" style="edgeStyle=none;html=1;" parent="238" source="12" target="30" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="35" style="edgeStyle=none;html=1;" parent="238" source="12" target="32" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="36" style="edgeStyle=none;html=1;" parent="238" source="12" target="33" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="37" style="edgeStyle=none;html=1;" parent="238" source="12" target="34" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="12" value="/cameras" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);" parent="238" vertex="1">
                    <mxGeometry x="2600" y="994" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="17" value="" style="edgeStyle=none;html=1;" parent="238" source="14" target="16" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="14" value="/eventos" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);" parent="238" vertex="1">
                    <mxGeometry x="2080" y="1023" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="21" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="16" target="20" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1350" y="1051"/>
                            <mxPoint x="1350" y="929"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="26" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="16" target="24" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="27" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="16" target="25" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="1350" y="1051"/>
                            <mxPoint x="1350" y="668"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="29" style="html=1;elbow=vertical;" parent="238" source="16" target="28" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="191" style="edgeStyle=none;html=1;" parent="238" source="16" target="190" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="196" style="html=1;" parent="238" source="16" target="195" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="16" value="&lt;div&gt;&lt;b&gt;HTTP&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;b&gt;GET&#39;s&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="1890" y="1021" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="145" value="" style="edgeStyle=none;html=1;" parent="238" source="20" target="144" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="20" value="&lt;div&gt;&lt;b&gt;Get All&lt;/b&gt;&lt;/div&gt;&lt;b&gt;endpoint: &quot;/eventos/&quot;&lt;/b&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="1170" y="899" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="167" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="24" target="168" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1125" y="1718" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="24" value="&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;URL Assinado da imagem de uma Camera associada a um Evento&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint: &quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/eventos/:eventId/image-url&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="970" y="1200" width="210" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="193" style="edgeStyle=none;html=1;" parent="238" source="25" target="192" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="25" value="&lt;div&gt;&lt;b&gt;Buscar Evento pelo Id&lt;/b&gt;&lt;/div&gt;&lt;p&gt;&lt;font style=&quot;color: rgb(0, 0, 0);&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;endpoint: &quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/eventos/:eventId&lt;/span&gt;&quot;&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="1120" y="598" width="210" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="210" value="" style="edgeStyle=none;html=1;" parent="238" source="28" target="209" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;Ultimo Evento por Camera&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/eventos/camera/:cameraID/latest&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="2150" y="1490" width="300" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="43" value="" style="edgeStyle=none;html=1;" parent="238" source="32" target="44" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="3140" y="880" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="46" style="edgeStyle=none;html=1;" parent="238" source="30" target="45" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="49" style="edgeStyle=none;html=1;" parent="238" source="30" target="47" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="30" value="HTTP&lt;div&gt;GET&#39;s&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);fontStyle=1" parent="238" vertex="1">
                    <mxGeometry x="2890" y="730" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="32" value="HTTP&lt;div&gt;POST&#39;s&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);fontStyle=1" parent="238" vertex="1">
                    <mxGeometry x="2950" y="1024" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="53" style="edgeStyle=none;html=1;" parent="238" source="33" target="51" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="33" value="HTTP&lt;div&gt;PUT&#39;s&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);fontStyle=1" parent="238" vertex="1">
                    <mxGeometry x="2960" y="1200" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="54" style="edgeStyle=none;html=1;" parent="238" source="34" target="52" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="34" value="HTTP&lt;div&gt;DELETE&#39;s&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);fontStyle=1" parent="238" vertex="1">
                    <mxGeometry x="2960" y="1600" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="39" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Estrutura:&lt;/h1&gt;&lt;div&gt;- RESTFull&lt;/div&gt;&lt;div&gt;- Consultas: Pisma&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="238" vertex="1">
                    <mxGeometry x="2620" y="760" width="130" height="98" as="geometry"/>
                </mxCell>
                <mxCell id="41" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" parent="238" source="12" target="39" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="2990" y="1180" as="sourcePoint"/>
                        <mxPoint x="3040" y="1130" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="56" value="" style="edgeStyle=none;html=1;" parent="238" source="44" target="55" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="44" value="&lt;div&gt;&lt;b&gt;Registrar Camera&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/camera/&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3160" y="993" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="137" value="" style="edgeStyle=none;html=1;" parent="238" source="45" target="136" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="45" value="&lt;div&gt;&lt;b&gt;Buscar Todas as Cameras&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/camera/&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3150" y="812" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="123" style="html=1;" parent="238" source="47" target="139" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="47" value="&lt;div&gt;&lt;b&gt;Buscar Camera pelo ID&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/cameras/:id&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="2860" y="446" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="77" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="51" target="76" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="51" value="&lt;div&gt;&lt;b&gt;Atualizar Camera pelo ID&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/camera/:id&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3180" y="1300" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="109" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="52" target="110" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="3489.9999999999995" y="1630" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="52" value="&lt;div&gt;&lt;b&gt;Deletar Camera pelo ID&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/camera/:id&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3240" y="1570" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="58" value="" style="edgeStyle=none;html=1;" parent="238" source="55" target="57" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="55" value="Estrutura esperada:&lt;blockquote style=&quot;text-align: left;&quot;&gt;&lt;font style=&quot;color: rgb(71, 255, 25);&quot;&gt;{&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&quot;name&quot; :&amp;nbsp;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;String,&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&quot;cameraID&quot; :&amp;nbsp;&lt;span style=&quot;color: rgb(71, 255, 25);&quot;&gt;String,&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&quot;zona&quot; :&amp;nbsp;&lt;span style=&quot;color: rgb(71, 255, 25);&quot;&gt;String,&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;white-space: pre;&quot;&gt;&#x9;&lt;/span&gt;&quot;enderecoRTSP&quot; :&lt;span style=&quot;color: rgb(71, 255, 25);&quot;&gt;String?&lt;/span&gt;&lt;br&gt;}&lt;/font&gt;&lt;/blockquote&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3415" y="977" width="250" height="154" as="geometry"/>
                </mxCell>
                <mxCell id="84" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="57" target="81" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="57" value="Prisma tenta criar um objeto e envia para o Mongo" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3770" y="994" width="185" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="72" value="" style="html=1;" parent="238" source="67" target="71" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="73" value="Erro" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="72" vertex="1" connectable="0">
                    <mxGeometry x="-0.3624" y="2" relative="1" as="geometry">
                        <mxPoint x="-19" y="-14" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="96" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="67" target="95" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="99" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="96" vertex="1" connectable="0">
                    <mxGeometry x="-0.7363" y="2" relative="1" as="geometry">
                        <mxPoint x="20" y="2" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="67" value="Tratamento&amp;nbsp;&lt;div&gt;de&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;Erro&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3389" y="538" width="116" height="116" as="geometry"/>
                </mxCell>
                <mxCell id="71" value="Log da Mensagem do Erro no terminal&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;HTTP Code: 400&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#FF4949;rounded=1;strokeColor=#b85450;" parent="238" vertex="1">
                    <mxGeometry x="3550" y="720" width="130" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="89" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="76" target="87" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="3680" y="1196" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="3540" y="1270"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="76" value="&lt;b&gt;PRISMA&lt;/b&gt; faz uma query WHERE passando o Parametro Id e o Body da Requisição" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3410" y="1315" width="180" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="79" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="81" target="71" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="4450" y="1180" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="80" value="Erro" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="79" vertex="1" connectable="0">
                    <mxGeometry x="-0.3624" y="2" relative="1" as="geometry">
                        <mxPoint x="112" y="-2" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="81" value="Tratamento&amp;nbsp;&lt;div&gt;de&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;Erro&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3804.5" y="702" width="116" height="116" as="geometry"/>
                </mxCell>
                <mxCell id="82" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="81" target="93" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="4900" y="710" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="83" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="82" vertex="1" connectable="0">
                    <mxGeometry x="-0.9226" y="-4" relative="1" as="geometry">
                        <mxPoint x="44" y="-6" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="92" value="" style="html=1;exitX=0.399;exitY=0.871;exitDx=0;exitDy=0;exitPerimeter=0;" parent="238" source="87" target="91" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="101" value="NÃO EXISTE&amp;nbsp;&lt;div&gt;CAMERA COM&amp;nbsp;&lt;/div&gt;&lt;div&gt;ESSE ID&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="92" vertex="1" connectable="0">
                    <mxGeometry x="-0.4945" y="2" relative="1" as="geometry">
                        <mxPoint x="-15" y="24" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="103" value="" style="html=1;" parent="238" source="87" target="102" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="104" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="103" vertex="1" connectable="0">
                    <mxGeometry x="-0.2611" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="106" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="87" target="105" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="87" value="Tratamento&amp;nbsp;&lt;div&gt;de&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;Erro&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3820" y="1212" width="116" height="116" as="geometry"/>
                </mxCell>
                <mxCell id="88" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="238" vertex="1" connectable="0">
                    <mxGeometry x="3970.0041176470577" y="1270" as="geometry">
                        <mxPoint y="-3" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="91" value="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;Log da Mensagem do Erro no terminal&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;HTTP Code: 404&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#FF4949;rounded=1;strokeColor=#b85450;" parent="238" vertex="1">
                    <mxGeometry x="3684.5" y="1400" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="93" value="Registra camera no Mongo" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="238" vertex="1">
                    <mxGeometry x="4050" y="882" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="95" value="Consulta todos os registros de cameras no Mongo" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;rounded=1;strokeColor=#82b366;" parent="238" vertex="1">
                    <mxGeometry x="3835" y="566" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="102" value="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;Log da Mensagem do Erro no terminal&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;HTTP Code: 400&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#FF4949;rounded=1;strokeColor=#b85450;" parent="238" vertex="1">
                    <mxGeometry x="3930" y="1420" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="105" value="Atualização do Registro no Mongo" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="238" vertex="1">
                    <mxGeometry x="4060" y="1240" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="117" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="110" target="116" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="110" value="&lt;b style=&quot;color: rgb(63, 63, 63); scrollbar-color: rgb(226, 226, 226) rgb(251, 251, 251);&quot;&gt;PRISMA&lt;/b&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;nbsp;faz&amp;nbsp;&lt;/span&gt;uma query WHERE passando o Parametro Id" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3505" y="1600" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="112" value="" style="html=1;" parent="238" source="116" target="91" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="3760" y="1738" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="113" value="NÃO EXISTE&amp;nbsp;&lt;div&gt;CAMERA COM&amp;nbsp;&lt;/div&gt;&lt;div&gt;ESSE ID&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="112" vertex="1" connectable="0">
                    <mxGeometry x="-0.4945" y="2" relative="1" as="geometry">
                        <mxPoint x="-12" y="-14" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="114" value="" style="html=1;" parent="238" source="116" target="102" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="3955" y="1758" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="115" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="114" vertex="1" connectable="0">
                    <mxGeometry x="-0.2611" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="119" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="116" target="118" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="120" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="119" vertex="1" connectable="0">
                    <mxGeometry x="-0.4295" y="-2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="116" value="Tratamento&amp;nbsp;&lt;div&gt;de&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;Erro&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3818" y="1571" width="116" height="116" as="geometry"/>
                </mxCell>
                <mxCell id="118" value="Deleta o Registro no Mongo" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;rounded=1;strokeColor=#82b366;" parent="238" vertex="1">
                    <mxGeometry x="4080" y="1599" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="125" style="html=1;" parent="238" source="122" target="130" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="3193.1159420289855" y="260" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="126" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="125" vertex="1" connectable="0">
                    <mxGeometry x="-0.1734" y="2" relative="1" as="geometry">
                        <mxPoint x="10" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="128" value="" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="122" target="127" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="134" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="128" vertex="1" connectable="0">
                    <mxGeometry x="-0.5976" y="-2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="132" style="html=1;" parent="238" source="122" target="129" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="133" value="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;NÃO EXISTE&amp;nbsp;&lt;/span&gt;&lt;div style=&quot;color: rgb(63, 63, 63); scrollbar-color: rgb(226, 226, 226) rgb(251, 251, 251);&quot;&gt;CAMERA COM&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;color: rgb(63, 63, 63); scrollbar-color: rgb(226, 226, 226) rgb(251, 251, 251);&quot;&gt;ESSE ID&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="132" vertex="1" connectable="0">
                    <mxGeometry x="-0.0698" y="2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="122" value="Tratamento&amp;nbsp;&lt;div&gt;de&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;Erro&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3204" y="300" width="116" height="116" as="geometry"/>
                </mxCell>
                <mxCell id="127" value="Consulta o Registro no Mongo" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;rounded=1;strokeColor=#82b366;" parent="238" vertex="1">
                    <mxGeometry x="3830" y="328" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="129" value="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;Log da Mensagem do Erro no terminal&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;HTTP Code: 404&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#FF4949;rounded=1;strokeColor=#b85450;" parent="238" vertex="1">
                    <mxGeometry x="3100" y="160" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="130" value="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;Log da Mensagem do Erro no terminal&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;HTTP Code: 400&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#FF4949;rounded=1;strokeColor=#b85450;" parent="238" vertex="1">
                    <mxGeometry x="3335.5" y="200" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="61" value="ClickHouse" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;fontSize=20;fontStyle=1" parent="238" vertex="1">
                    <mxGeometry x="260" y="1578" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="138" style="edgeStyle=none;html=1;" parent="238" source="136" target="67" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="136" value="&lt;p&gt;&lt;font style=&quot;color: rgb(0, 0, 0);&quot;&gt;&lt;span&gt;&lt;b&gt;PRISMA &lt;/b&gt;faz um&amp;nbsp;&lt;font&gt;&lt;b&gt;findMany &lt;/b&gt;e&amp;nbsp;&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;todos os registros das cameras, e organiza o output por ordem decrescente de criação&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3350" y="810" width="170" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="140" style="edgeStyle=none;html=1;" parent="238" source="139" target="122" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="139" value="&lt;p&gt;&lt;font style=&quot;color: rgb(0, 0, 0);&quot;&gt;&lt;b&gt;PRISMA &lt;/b&gt;faz um&amp;nbsp;&lt;font&gt;&lt;b&gt;findUnique +&amp;nbsp; WHERE &lt;/b&gt;com o parametro id passado.&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="3090" y="450" width="170" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="141" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Estrutura:&lt;/h1&gt;&lt;div&gt;- Consultas: Axios&lt;/div&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="238" vertex="1">
                    <mxGeometry x="1970" y="810" width="130" height="98" as="geometry"/>
                </mxCell>
                <mxCell id="143" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" parent="238" source="141" target="14" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="2672" y="1004" as="sourcePoint"/>
                        <mxPoint x="2677" y="940" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="150" style="edgeStyle=none;html=1;" parent="238" source="144" target="148" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="846" y="929" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="144" value="O &lt;b&gt;AXIOS s&lt;/b&gt;eleciona todos os registros da tabela `events`&amp;nbsp;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="970" y="899" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="146" value="" style="html=1;" parent="238" source="148" target="149" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="785.9285714285716" y="984.9285714285716" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="147" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="146" vertex="1" connectable="0">
                    <mxGeometry x="-0.3624" y="2" relative="1" as="geometry">
                        <mxPoint x="-6" y="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="152" value="" style="edgeStyle=none;html=1;" parent="238" source="148" target="151" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="730" y="929" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="153" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="152" vertex="1" connectable="0">
                    <mxGeometry x="-0.094" y="4" relative="1" as="geometry">
                        <mxPoint x="-5" y="-5" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="148" value="Tratamento&amp;nbsp;&lt;div&gt;de&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;Erro&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="723" y="868" width="116" height="116" as="geometry"/>
                </mxCell>
                <mxCell id="149" value="Log da Mensagem do Erro no terminal&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;HTTP Code: 400&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#FF4949;rounded=1;strokeColor=#b85450;" parent="238" vertex="1">
                    <mxGeometry x="716" y="1078" width="130" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="154" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="238" source="151" target="61" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="151" value="Exibe os Registros" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;rounded=1;strokeColor=#82b366;" parent="238" vertex="1">
                    <mxGeometry x="500" y="899" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="160" style="edgeStyle=none;html=1;" parent="238" source="158" target="149" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="161" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="160" vertex="1" connectable="0">
                    <mxGeometry x="-0.1091" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="163" value="" style="edgeStyle=none;html=1;" parent="238" source="158" target="162" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="164" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="163" vertex="1" connectable="0">
                    <mxGeometry x="-0.4449" y="2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="158" value="Tratamento&amp;nbsp;&lt;div&gt;de&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;Erro&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="723" y="1283" width="116" height="116" as="geometry"/>
                </mxCell>
                <mxCell id="165" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="238" source="162" target="61" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="560" y="1608"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="162" value="Busca o Registro" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;rounded=1;strokeColor=#82b366;" parent="238" vertex="1">
                    <mxGeometry x="500" y="1308" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="175" style="edgeStyle=none;html=1;" parent="238" source="168" target="174" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="168" value="O &lt;b&gt;AXIOS s&lt;/b&gt;eleciona todos os registros da tabela `events`&amp;nbsp; que possuem o parametro :eventId como valor" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="880" y="1660" width="190" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="171" value="Log da Mensagem do Erro no terminal&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;HTTP Code: 400&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#FF4949;rounded=1;strokeColor=#b85450;" parent="238" vertex="1">
                    <mxGeometry x="660" y="1930" width="130" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="172" style="edgeStyle=none;html=1;" parent="238" source="174" target="171" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="173" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="172" vertex="1" connectable="0">
                    <mxGeometry x="-0.1091" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="177" value="" style="edgeStyle=none;html=1;" parent="238" source="174" target="179" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="178" value="NÃO EXISTE ESTE&amp;nbsp;&lt;div&gt;eventID&amp;nbsp;&lt;/div&gt;&lt;div&gt;NO CLICKHOUSE&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="177" vertex="1" connectable="0">
                    <mxGeometry x="-0.4392" y="-1" relative="1" as="geometry">
                        <mxPoint x="20" y="-11" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="180" style="edgeStyle=none;html=1;" parent="238" source="174" target="176" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="181" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="180" vertex="1" connectable="0">
                    <mxGeometry x="-0.1296" y="-2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="174" value="Tratamento&amp;nbsp;&lt;div&gt;de&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;Erro&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="920" y="1912" width="116" height="116" as="geometry"/>
                </mxCell>
                <mxCell id="184" value="" style="edgeStyle=none;html=1;" parent="238" source="176" target="183" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="176" value="const imagePath&lt;div&gt;=&lt;/div&gt;&lt;div&gt;Armazena as informações que recebeu da consulta do &lt;b&gt;ClickHouse&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="885" y="2108" width="186" height="134" as="geometry"/>
                </mxCell>
                <mxCell id="179" value="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;Log da Mensagem do Erro no terminal&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;HTTP Code: 404&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#FF4949;rounded=1;strokeColor=#b85450;" parent="238" vertex="1">
                    <mxGeometry x="1170" y="1968" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="186" value="" style="edgeStyle=none;html=1;" parent="238" source="183" target="185" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="183" value="&lt;div&gt;const command&lt;/div&gt;&lt;div&gt;=&lt;/div&gt;Monta um objeto que vai armazenar um parametro para consulta com o GetObjectCommand():&lt;div&gt;Bucket: events&lt;/div&gt;&lt;div&gt;Chave: imagePath&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="885" y="2348" width="186" height="134" as="geometry"/>
                </mxCell>
                <mxCell id="187" style="edgeStyle=orthogonalEdgeStyle;html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="238" source="168" target="61" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="189" style="edgeStyle=none;html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="238" source="185" target="188" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="185" value="Gera a URL assinada usando o getSignedUrl() que vai expirar em 5 minutos passando os parametros:&lt;div&gt;s3 = S3Client&lt;/div&gt;&lt;div&gt;command: = consulta&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;rounded=1;strokeColor=#82b366;" parent="238" vertex="1">
                    <mxGeometry x="885" y="2588" width="190" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="188" value="Minio" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;fontSize=20;fontStyle=1" parent="238" vertex="1">
                    <mxGeometry x="510" y="2613" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="215" value="" style="edgeStyle=none;html=1;" parent="238" source="190" target="214" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="190" value="&lt;div&gt;&lt;b&gt;Buscar Eventos com alguns filtros pasados pelos parametros da URL&lt;/b&gt;&lt;/div&gt;&lt;p&gt;&lt;font style=&quot;color: rgb(0, 0, 0);&quot; face=&quot;Helvetica&quot;&gt;&lt;b&gt;endpoint: &quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/eventos/filter&lt;/span&gt;&quot;&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="1170" y="328" width="210" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="194" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="192" target="148" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="192" value="O &lt;b&gt;AXIOS &lt;/b&gt;faz uma query&lt;b&gt; SQL &lt;/b&gt;selecionando&amp;nbsp;todos os registros da tabela `events` que possuem o eventId igual ao que foi passado como parametro" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="890" y="580" width="150" height="172" as="geometry"/>
                </mxCell>
                <mxCell id="198" style="edgeStyle=none;html=1;" parent="238" source="195" target="197" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="195" value="&lt;div&gt;&lt;b&gt;Retornar todos os eventos de uma camera&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/eventos/camera/:cameraID&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="1570" y="1399" width="300" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="206" style="html=1;" parent="238" source="197" target="203" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="197" value="O &lt;b&gt;AXIOS &lt;/b&gt;faz uma query&lt;b&gt; SQL &lt;/b&gt;selecionando&amp;nbsp;todos os registros da tabela `events` que possuem o cameraID igual ao que foi passado como parametro" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="1600" y="1700" width="230" height="172" as="geometry"/>
                </mxCell>
                <mxCell id="199" value="" style="html=1;" parent="238" source="203" target="204" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1805.9285714285716" y="2174.9285714285716" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="200" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="199" vertex="1" connectable="0">
                    <mxGeometry x="-0.3624" y="2" relative="1" as="geometry">
                        <mxPoint x="-6" y="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="201" value="" style="edgeStyle=none;html=1;" parent="238" source="203" target="205" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1750" y="2119" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="202" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="201" vertex="1" connectable="0">
                    <mxGeometry x="-0.094" y="4" relative="1" as="geometry">
                        <mxPoint x="-5" y="-5" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="203" value="Tratamento&amp;nbsp;&lt;div&gt;de&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;Erro&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="1670" y="2012" width="116" height="116" as="geometry"/>
                </mxCell>
                <mxCell id="204" value="Log da Mensagem do Erro no terminal&lt;div&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;HTTP Code: 400&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=#FF4949;rounded=1;strokeColor=#b85450;" parent="238" vertex="1">
                    <mxGeometry x="1440" y="2040" width="130" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="205" value="Consulta os Registros" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;rounded=1;strokeColor=#82b366;" parent="238" vertex="1">
                    <mxGeometry x="1670" y="2210" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="208" style="edgeStyle=none;html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="238" source="207" target="205" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="207" value="ClickHouse" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;fontSize=20;fontStyle=1" parent="238" vertex="1">
                    <mxGeometry x="1660" y="2385" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="212" style="html=1;" parent="238" source="209" target="211" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="209" value="&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;Armazena os parametros:&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: rgb(63, 63, 63);&quot;&gt;cameraID = Obrigatorio&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: rgb(63, 63, 63);&quot;&gt;limit = Opcional&lt;/span&gt;&lt;/div&gt;&lt;/span&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;align=center;" parent="238" vertex="1">
                    <mxGeometry x="2190" y="1752" width="200" height="108" as="geometry"/>
                </mxCell>
                <mxCell id="213" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="211" target="203" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="211" value="O &lt;b&gt;AXIOS &lt;/b&gt;faz uma query&lt;b&gt; SQL &lt;/b&gt;selecionando a quantidade de registros passados pelo parametro `limit` os registros da tabela `events` que possuem o `cameraID` igual ao que foi passado como parametro" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="1960" y="1984" width="230" height="172" as="geometry"/>
                </mxCell>
                <mxCell id="219" value="" style="edgeStyle=none;html=1;" parent="238" source="214" target="218" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="214" value="Faz&amp;nbsp;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;uma filtragem e&lt;/span&gt;xtraindo os seguintes parametros da query:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li style=&quot;text-align: left;&quot;&gt;from = apartir de qual data (timestamp)&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;to = até qual data (timestamp)&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;limit = Limite maximo de Registros (por padrão 20)&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;offset = apartir de qual posição da resposta começar a puxar ( por padrão começa no primero = 0 )&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;cameraID&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;&amp;nbsp;= Id da Camera que quer puxar&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="740" y="229" width="320" height="258" as="geometry"/>
                </mxCell>
                <mxCell id="221" value="" style="edgeStyle=none;html=1;" parent="238" source="218" target="220" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="224" value="Forneceu algum&lt;div&gt;&amp;nbsp;parametro&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="221" vertex="1" connectable="0">
                    <mxGeometry x="-0.2433" y="-1" relative="1" as="geometry">
                        <mxPoint y="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="223" value="" style="edgeStyle=none;html=1;" parent="238" source="218" target="222" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="225" value="Não Forneceu&amp;nbsp;&lt;div&gt;nenhum parametro&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="223" vertex="1" connectable="0">
                    <mxGeometry x="-0.1003" y="2" relative="1" as="geometry">
                        <mxPoint x="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="218" value="Montando&lt;div&gt;a Query&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="390" y="250" width="110" height="98" as="geometry"/>
                </mxCell>
                <mxCell id="228" style="edgeStyle=none;html=1;" parent="238" source="220" target="226" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="220" value="Monta a query passando o WHERE possuindo todos os parametros que o usuario passou" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="200" y="430" width="160" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="227" value="" style="edgeStyle=none;html=1;" parent="238" source="222" target="226" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="222" value="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;Monta a query passando apenas o valor padrão de:&lt;/span&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;limit&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;offset&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="520" y="424" width="160" height="112" as="geometry"/>
                </mxCell>
                <mxCell id="229" style="edgeStyle=orthogonalEdgeStyle;html=1;" parent="238" source="226" target="148" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="226" value="AXIOS faz a requisição no clickhouse" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="238" vertex="1">
                    <mxGeometry x="410" y="692" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="4" value="Ligar o APP" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);" parent="238" vertex="1">
                    <mxGeometry x="2310" y="169" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="256" value="Zookeeper" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;fontSize=20;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="-750" y="-1910" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="332" value="&lt;font style=&quot;font-size: 30px;&quot;&gt;KAFKA CONSUMER&lt;/font&gt;" style="swimlane;horizontal=0;whiteSpace=wrap;html=1;startSize=60;" parent="1" vertex="1">
                    <mxGeometry x="635" y="-2000" width="3820" height="1140" as="geometry"/>
                </mxCell>
                <mxCell id="254" value="" style="edgeStyle=none;html=1;" parent="332" source="230" target="253" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="230" value="Liga o Consumer do Kafka" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);" parent="332" vertex="1">
                    <mxGeometry x="390" y="560" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="259" value="" style="edgeStyle=none;html=1;" parent="332" source="253" target="260" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="253" value="Estabelece conexão com o Kafka" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="390" y="360" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="265" style="edgeStyle=none;html=1;" parent="332" source="258" target="262" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="258" value="Loga no console que esta rodando o consumer" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="655" y="520" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="264" style="edgeStyle=none;html=1;" parent="332" source="260" target="258" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="260" value="Inscreve o consumidor no topico &#39;devide-events&#39; lendo apenas as mensagens novas que estão sendo enviadas apartir do momento que é ligado" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="620" y="330" width="190" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="267" value="" style="edgeStyle=none;html=1;" parent="332" source="262" target="266" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="262" value="Inicia o consumer" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="870" y="520" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="269" value="" style="edgeStyle=none;html=1;" parent="332" source="266" target="268" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="266" value="O consumer fica escutando tudo&amp;nbsp; que entra no kafka e verifica a cada nova mensagem com o eachMessage()" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1070" y="495" width="190" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="272" style="edgeStyle=none;html=1;" parent="332" source="268" target="270" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="268" value="Pega a mensagem recebeu do Kafka e armazena seus valores convertidos em JSON num Buffer" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1085" y="315" width="160" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="274" value="" style="edgeStyle=none;html=1;" parent="332" source="270" target="273" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="270" value="Loga no console que recebeu uma nova Mensagem" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1300" y="330" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="276" value="" style="edgeStyle=none;html=1;" parent="332" source="273" target="275" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="273" value="Loga no console os valores da mensagem recebida" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1300" y="520" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="278" value="" style="edgeStyle=none;html=1;" parent="332" source="275" target="277" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="275" value="Captura o valor do ID da camera recebida pelo evento, se o valor vinher vazio, ele coloca por padrão&lt;div&gt;&quot;unknown-device&quot;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1485" y="290" width="200" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="282" value="" style="edgeStyle=none;html=1;" parent="332" source="277" target="281" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="277" value="Busca a Camera via PRISMA pelo ID recebido atrelado ao evento" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1510" y="535" width="200" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="286" value="" style="edgeStyle=none;html=1;" parent="332" source="281" target="285" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="287" value="Se a camera recebida pelo evento&amp;nbsp;&lt;div&gt;não estiver cadastrada no Mongo&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="286" vertex="1" connectable="0">
                    <mxGeometry x="-0.2098" y="-4" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="289" value="" style="edgeStyle=none;html=1;" parent="332" source="281" target="288" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="281" value="Valida se a Camera existe no Mongo" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1780" y="300" width="140" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="285" value="Loga no console que o evento foi ignorado porque a camera não estava cadastrada + Seus valores recebidos" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;rounded=1;strokeColor=#b85450;" parent="332" vertex="1">
                    <mxGeometry x="1760" y="110" width="180" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="291" value="" style="edgeStyle=none;html=1;" parent="332" source="288" target="290" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="288" value="Armazena o possivel valor da imagem recebida pelo evento em Base64" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1790" y="530" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="293" value="" style="edgeStyle=none;html=1;" parent="332" source="290" target="292" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="295" value="" style="edgeStyle=none;html=1;" parent="332" source="290" target="294" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="296" value="Valor esta como&amp;nbsp;&lt;div&gt;Undefined ou Null&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="295" vertex="1" connectable="0">
                    <mxGeometry x="-0.3289" y="-2" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="290" value="Valida se&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;recebeu&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;&amp;nbsp;a imagem&lt;/span&gt;&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1980" y="505" width="110" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="298" value="" style="edgeStyle=none;html=1;" parent="332" source="292" target="297" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="292" value="Converte a imagem recebida em um Buffer" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="1975" y="340" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="294" value="Loga no console que o evento não recebeu imagem + estrutura do evento;" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;rounded=1;strokeColor=#b85450;" parent="332" vertex="1">
                    <mxGeometry x="1975" y="720" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="300" value="" style="edgeStyle=none;html=1;" parent="332" source="297" target="299" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="297" value="Armazena um valor de TimestampSeguro" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="2175" y="340" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="304" value="" style="edgeStyle=none;html=1;" parent="332" source="299" target="303" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="299" value="Monta a Chave do MinIO para o arquivo:&lt;div&gt;Repositorio = ID da Camera&lt;/div&gt;&lt;div&gt;Nome do Arquivo JPG = TimestampSeguro&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="2147.5" y="480" width="175" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="306" value="" style="edgeStyle=none;html=1;" parent="332" source="303" target="305" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="516" style="edgeStyle=none;html=1;dashed=1;dashPattern=12 12;endArrow=none;endFill=0;" parent="332" source="303" target="515" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="303" value="Envia a imagem para o MinIO via PutObjectCommand():&lt;div&gt;Bucket = Variavel do Sistema (events)&lt;/div&gt;&lt;div&gt;Key = Chave montada&lt;/div&gt;&lt;div&gt;Body = Buffer da Imagem&lt;/div&gt;&lt;div&gt;ContentType = imagem jpeg&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="2390" y="460" width="200" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="308" value="" style="edgeStyle=none;html=1;" parent="332" source="305" target="307" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="328" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="308" vertex="1" connectable="0">
                    <mxGeometry x="-0.5168" y="-4" relative="1" as="geometry">
                        <mxPoint y="-9" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="310" value="" style="edgeStyle=none;html=1;" parent="332" source="305" target="309" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="311" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="310" vertex="1" connectable="0">
                    <mxGeometry x="-0.1372" y="1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="305" value="Tenta o envio" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="2450" y="325" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="313" value="" style="edgeStyle=none;html=1;" parent="332" source="307" target="312" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="307" value="&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;Monta objeto do evento para inserir no ClickHouse:&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;&quot;&gt;&lt;span style=&quot;background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li style=&quot;text-align: left;&quot;&gt;eventId = timestamp seguro&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;cameraID = ID seguro campturado da camera&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;timestamp = timestamp seguro, tratado e retornado na função toClickhouseDataTime&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;confidence = este campo esta associado a&amp;nbsp;&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;image_path = Chave que Criamos&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;payload = todas as informações do evento que vinheram e não tratamos, bom para garantir todos os metadados da mensagem&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;align=center;" parent="332" vertex="1">
                    <mxGeometry x="2670" y="247.5" width="310" height="235" as="geometry"/>
                </mxCell>
                <mxCell id="309" value="Loga no console erro" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;rounded=1;strokeColor=#b85450;" parent="332" vertex="1">
                    <mxGeometry x="2430" y="175" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="315" value="" style="edgeStyle=none;html=1;" parent="332" source="319" target="314" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="318" value="" style="edgeStyle=none;html=1;" parent="332" source="319" target="314" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="320" value="" style="edgeStyle=none;html=1;" parent="332" source="312" target="319" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="312" value="Cria query com SQL para inserção do payload contendo as informações do evento na tabela events no Clickhouse, passando tudo como JSON" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="2725" y="540" width="200" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="317" value="" style="edgeStyle=none;html=1;" parent="332" source="314" target="316" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="314" value="Loga no console todas as informações do Upload do evento:&lt;div&gt;Bucket + Key + tamanho do Buffer&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="3055" y="290" width="155" height="115" as="geometry"/>
                </mxCell>
                <mxCell id="325" style="edgeStyle=none;html=1;" parent="332" source="316" target="323" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="518" style="edgeStyle=none;html=1;dashed=1;dashPattern=12 12;endArrow=none;endFill=0;" parent="332" source="316" target="517" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="316" value="Executa Post no ClickHouse via AXIOS:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li style=&quot;text-align: left;&quot;&gt;Query = SQL&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;Payload = JSON&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;Headers = Tipo do Conteudo JSON&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;Auth = Nescessario para fazer o envio, informações setadas no Docker Compose&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="3326" y="245.75" width="238.5" height="203.5" as="geometry"/>
                </mxCell>
                <mxCell id="319" value="&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;&amp;nbsp;Cria payload&amp;nbsp; em formato JSON com o objeto do evento para enviar para o clickhouse&lt;/span&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="3040" y="540" width="185" height="105" as="geometry"/>
                </mxCell>
                <mxCell id="321" value="" style="edgeStyle=none;html=1;" parent="332" source="323" target="324" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="322" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="321" vertex="1" connectable="0">
                    <mxGeometry x="-0.1372" y="1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="327" value="" style="edgeStyle=none;html=1;" parent="332" source="323" target="326" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="329" value="PASSOU" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="327" vertex="1" connectable="0">
                    <mxGeometry x="-0.5495" y="-3" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="323" value="Tenta o envio" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="3405.25" y="552.5" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="324" value="Loga no console erro" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;rounded=1;strokeColor=#b85450;" parent="332" vertex="1">
                    <mxGeometry x="3385.25" y="730" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="331" value="" style="edgeStyle=none;html=1;" parent="332" source="326" target="330" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="326" value="Loga no console, sucesso do insert no Clickhouse" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="3630" y="565" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="330" value="Loga no console, sucesso geral + ID do evento registrado" style="whiteSpace=wrap;html=1;fillColor=#d5e8d4;rounded=1;strokeColor=#82b366;" parent="332" vertex="1">
                    <mxGeometry x="3630" y="425" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="510" value="" style="edgeStyle=none;html=1;" parent="332" source="508" target="509" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="508" value="Configura o objeto do kafka:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;ClientId = &#39;aeolus-app&#39;&lt;/li&gt;&lt;li&gt;brokers = .env.KAFKA_BROKER&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="332" vertex="1">
                    <mxGeometry x="120" y="50" width="220" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="512" value="" style="edgeStyle=none;html=1;" parent="332" source="509" target="513" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="230.36275695284166" y="566.75" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="509" value="Configura Consumer do Kafka:&lt;div&gt;&lt;span style=&quot;background-color: transparent; color: rgb(63, 63, 63);&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul style=&quot;padding-left: 0px;&quot;&gt;&lt;li&gt;&lt;span style=&quot;background-color: transparent; color: rgb(63, 63, 63);&quot;&gt;groupId = &#39;aeolus-group&#39;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;" parent="332" vertex="1">
                    <mxGeometry x="125" y="322.5" width="215" height="135" as="geometry"/>
                </mxCell>
                <mxCell id="514" style="edgeStyle=none;html=1;" parent="332" source="513" target="230" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="513" value="Configura o Cliente S3:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;Endpoint: .env.MINIO_ENDPOINT =&amp;nbsp; localhost:9092&lt;/li&gt;&lt;li&gt;Region: &#39;&lt;b&gt;us-east-1&lt;/b&gt;&#39;&amp;nbsp;&amp;nbsp;&lt;/li&gt;&lt;li&gt;Credencials.acesskeyId = .env.MINIO_ENDPOINT = &#39;&lt;b&gt;minio&lt;/b&gt;&#39;&lt;/li&gt;&lt;li&gt;Credencials.secretAcessKey = .env.MINIO_ROOT_PASSWORD = &#39;&lt;b&gt;minio123&lt;/b&gt;&#39;&lt;/li&gt;&lt;li&gt;ForcePath: &lt;b&gt;true &lt;/b&gt;(nescessrio para o minIO rodando localmente)&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="332" vertex="1">
                    <mxGeometry x="80" y="670" width="300" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="515" value="MinIO" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;fontSize=20;fontStyle=1" parent="332" vertex="1">
                    <mxGeometry x="2435" y="730" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="517" value="ClickHouse" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;fontSize=20;fontStyle=1" parent="332" vertex="1">
                    <mxGeometry x="3345" y="50" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="333" value="&lt;font style=&quot;font-size: 30px;&quot;&gt;Create Bucket&lt;/font&gt;" style="swimlane;horizontal=0;whiteSpace=wrap;html=1;startSize=60;" parent="1" vertex="1">
                    <mxGeometry x="-1400" y="-1530" width="1520" height="690" as="geometry"/>
                </mxCell>
                <mxCell id="232" value="Cria um Bucket no MinIO" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);" parent="333" vertex="1">
                    <mxGeometry x="735" y="420" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="236" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Tentativas de Criação&lt;/h1&gt;&lt;p&gt;Esta função faz&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;10 tentativas de&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;criar o bucket no MinIO com o intervalo de 3 segundos cada&lt;/span&gt;&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="333" vertex="1">
                    <mxGeometry x="940" y="80" width="180" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="237" style="edgeStyle=none;html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;" parent="333" source="236" target="232" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="234" value="Envia atravez s3Client usando a função CreateBucketCommand usando o nome do bucket criado como o que já esta setado no .env ou &#39;events&#39;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="333" vertex="1">
                    <mxGeometry x="700" y="240" width="190" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="246" style="edgeStyle=none;html=1;" parent="333" source="232" target="234" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="239" value="Tratamento de erros" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="333" vertex="1">
                    <mxGeometry x="510" y="250" width="110" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="247" style="edgeStyle=none;html=1;" parent="333" source="234" target="239" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="250" value="FIM" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#000000;fontColor=#FFFFFF;fontStyle=1" parent="333" vertex="1">
                    <mxGeometry x="130" y="265" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="243" value="" style="edgeStyle=none;html=1;" parent="333" source="239" target="242" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="248" value="BUCKET já existe&lt;div&gt;no MinIO&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="243" vertex="1" connectable="0">
                    <mxGeometry x="0.0841" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="252" style="edgeStyle=none;html=1;" parent="333" source="242" target="250" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="242" value="Loga no console que o bucket já existe" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="333" vertex="1">
                    <mxGeometry x="310" y="410" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="244" value="Loga no Console que aconteceu um Erro" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="333" vertex="1">
                    <mxGeometry x="310" y="150" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="245" value="" style="edgeStyle=none;html=1;" parent="333" source="239" target="244" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="249" value="Falhou apos&lt;div&gt;as 10 tentativas&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="245" vertex="1" connectable="0">
                    <mxGeometry x="0.0362" y="-3" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="251" style="edgeStyle=none;html=1;" parent="333" source="244" target="250" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="507" style="edgeStyle=none;html=1;" parent="333" source="505" target="232" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="505" value="Configura o Cliente S3:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;Endpoint: .env.MINIO_ENDPOINT ou &#39;&lt;b&gt;localhost:9002&lt;/b&gt;&#39;&lt;/li&gt;&lt;li&gt;Region: &#39;us-east-1&#39;&amp;nbsp;&amp;nbsp;&lt;/li&gt;&lt;li&gt;Credencials.acesskeyId = .env.MINIO_ENDPOINT ou &#39;minio&#39;&lt;/li&gt;&lt;li&gt;Credencials.secretAcessKey = .env.MINIO_ROOT_PASSWORD ou &#39;minio123&#39;&lt;/li&gt;&lt;li&gt;ForcePath: true (nescessrio para o minIO rodando localmente)&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="333" vertex="1">
                    <mxGeometry x="970" y="345" width="300" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="339" style="edgeStyle=none;html=1;" parent="1" source="337" target="338" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="337" value="npm start" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontStyle=1;strokeColor=#005700;fontColor=#ffffff;" parent="1" vertex="1">
                    <mxGeometry x="110" y="-4020" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="341" value="" style="edgeStyle=none;html=1;" parent="1" source="338" target="340" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="338" value="Carreaga as Variaveis do sistema" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="320" y="-4010" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="343" value="" style="edgeStyle=none;html=1;" parent="1" source="340" target="342" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="340" value="Cria a porta e o host usando o modulo config" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="320" y="-3910" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="345" value="" style="edgeStyle=none;html=1;" parent="1" source="342" target="344" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="342" value="Cria Midware para ler os JSON&#39;s recebidos pelos Body&#39;s e define o tamanho maximo para 50MB&amp;nbsp;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="510" y="-3920" width="150" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="349" value="" style="edgeStyle=none;html=1;" parent="1" source="344" target="348" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="344" value="Adciona a configuração de urlencoded de forma estendida" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="525" y="-4010" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="347" style="edgeStyle=none;html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;" parent="1" source="346" target="344" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="346" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Url Encoded&lt;/h1&gt;&lt;p&gt;&lt;font face=&quot;Helvetica&quot;&gt;Basicamente o APP permite receber requisições com o body em&amp;nbsp;x-www-form-urlencoded, e converte seus valores como se fossem um Dicionario.&amp;nbsp;&amp;nbsp;&lt;/font&gt;&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="400" y="-4250" width="180" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="351" value="" style="edgeStyle=none;html=1;" parent="1" source="356" target="350" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="353" value="" style="edgeStyle=none;html=1;" parent="1" source="348" target="352" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1050" y="-3972" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="348" value="&lt;p&gt;Define um Middleware global que loga no console uma mensagem descrevento cada nova HTTP request que passar pelo APP:&lt;font color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/p&gt;&lt;ul&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;b&gt;TimeStamp &lt;/b&gt;no formato ISO&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Metodo HTTP&lt;/b&gt; da requisição que foi enviada&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;b&gt;Rota&lt;/b&gt; que a requisição usou&lt;/li&gt;&lt;/ul&gt;&lt;div style=&quot;&quot;&gt;Passa para o proximo usando next()&lt;/div&gt;&lt;div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;" parent="1" vertex="1">
                    <mxGeometry x="710" y="-4070" width="305" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="360" value="" style="edgeStyle=none;html=1;" parent="1" source="350" target="359" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="362" value="" style="edgeStyle=none;html=1;" parent="1" source="350" target="361" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="350" value="Disponibiliza as rotas na porta:&lt;div&gt;3030&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;align=center;" parent="1" vertex="1">
                    <mxGeometry x="1607.5" y="-3810" width="105" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="355" value="" style="edgeStyle=none;html=1;" parent="1" source="352" target="354" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="352" value="Define Midleware para tratamento de erros&amp;nbsp; não capturados.&lt;div&gt;HTTP Code 500&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="1100" y="-4035" width="120" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="357" value="" style="edgeStyle=none;html=1;" parent="1" source="354" target="356" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="354" value="&lt;p&gt;&lt;font&gt;Define Midleware de&amp;nbsp;&lt;span style=&quot;font-size: 13px; text-align: left;&quot;&gt;&quot;catch-all&quot; para rotas inexistentes, evitando que a requisição fique pendente ou retorne HTML padrão.&lt;/span&gt;&lt;/font&gt;&lt;/p&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="1275" y="-4045" width="200" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="356" value="Inicia o servidor HTTP, logando no console:&lt;div&gt;&lt;span style=&quot;color: rgb(63, 63, 63); text-align: left; background-color: transparent;&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;div style=&quot;&quot;&gt;&lt;ul&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: rgb(63, 63, 63);&quot;&gt;URL + Porta&amp;nbsp;&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: rgb(63, 63, 63);&quot;&gt;Lista nome dos Buckets do MinIO&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: rgb(63, 63, 63);&quot;&gt;Topico do Kafka&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;background-color: transparent; color: rgb(63, 63, 63);&quot;&gt;Intervalo de tempo maximo e minimo&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="1540" y="-4080" width="240" height="190" as="geometry"/>
                </mxCell>
                <mxCell id="364" value="" style="edgeStyle=none;html=1;" parent="1" source="359" target="363" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="359" value="/" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="1475" y="-3690" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="373" style="edgeStyle=none;html=1;" parent="1" source="361" target="369" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="374" style="edgeStyle=none;html=1;" parent="1" source="361" target="370" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="376" style="edgeStyle=none;html=1;" parent="1" source="361" target="372" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="361" value="/api" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="1740" y="-3690" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="366" value="" style="edgeStyle=none;html=1;" parent="1" source="363" target="365" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="363" value="HTTP&lt;div&gt;GET&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="1315" y="-3620" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="367" style="edgeStyle=none;html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;" parent="1" source="365" target="368" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1110" y="-3670" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="365" value="Metadados&amp;nbsp;&lt;div&gt;do serviço&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="1150" y="-3560" width="140" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="368" value="&lt;h1 style=&quot;margin-top: 0px;&quot;&gt;Estrutura desses metadados&lt;/h1&gt;&lt;p&gt;Esse endpoint foi criado para descrever as prinicpais configurações relevante aos serviços dos endpoints do sistema, ele vai retornar um JSON com:&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Nome do sistema&lt;/li&gt;&lt;li&gt;Verção&lt;/li&gt;&lt;li&gt;Descrição&lt;/li&gt;&lt;li&gt;Endpoints&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Tipos de rotas&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="870" y="-3850" width="220" height="270" as="geometry"/>
                </mxCell>
                <mxCell id="384" value="" style="edgeStyle=none;html=1;" parent="1" source="369" target="385" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="2420" y="-3560" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="389" style="edgeStyle=none;html=1;" parent="1" source="369" target="386" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="390" style="edgeStyle=none;html=1;" parent="1" source="369" target="387" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="391" style="edgeStyle=none;html=1;" parent="1" source="369" target="388" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="369" value="HTTP&lt;div&gt;GET&#39;s&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="2220" y="-3590" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="378" value="" style="edgeStyle=none;html=1;" parent="1" source="370" target="380" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="2390" y="-3735" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="370" value="HTTP&lt;div&gt;POST&#39;s&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="2190" y="-3765" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="382" style="edgeStyle=none;html=1;" parent="1" source="372" target="381" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="372" value="HTTP&lt;div&gt;DELETE&#39;s&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="2115" y="-3310" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="380" value="&lt;div&gt;&lt;b&gt;Adciona um novo dispositivo&amp;nbsp;&lt;/b&gt;&lt;b style=&quot;background-color: transparent; color: rgb(63, 63, 63); scrollbar-color: rgb(226, 226, 226) rgb(251, 251, 251);&quot;&gt;(&quot;camera&quot;)&amp;nbsp;&lt;/b&gt;&lt;b style=&quot;color: rgb(63, 63, 63); background-color: transparent;&quot;&gt;para ser gerado&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/api/devices/&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="2480" y="-3810" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="381" value="&lt;div&gt;&lt;b&gt;Deleta um dispositivo (&quot;camera&quot;) pelo ID&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/api/devices/:deviceId&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="2135" y="-3190" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="393" value="" style="edgeStyle=none;html=1;" parent="1" source="380" target="392" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="385" value="&lt;div&gt;&lt;b&gt;Lista todos os dispositivos&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/api/devices/&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="2515" y="-3610" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="386" value="&lt;div&gt;&lt;b&gt;Obtem Status de um dispositivo&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/api/devices/:deviceId/status&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="2535" y="-3450" width="230" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="387" value="&lt;div&gt;&lt;b&gt;Obtem informações do topico do Kafka&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/api/kafka/topic-info&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="2560" y="-3290" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="388" value="&lt;div&gt;&lt;b&gt;Health Check&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;endpoint:&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b style=&quot;background-color: transparent;&quot;&gt;&quot;&lt;span style=&quot;font-size: 14px; white-space: pre;&quot;&gt;/api/health/&lt;/span&gt;&quot;&lt;/b&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="2385" y="-3190" width="160" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="395" value="" style="edgeStyle=none;html=1;" parent="1" source="392" target="394" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="392" value="Estrutura esperada:&lt;div&gt;&lt;font color=&quot;#000000&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;div&gt;&lt;div style=&quot;color: rgb(212, 212, 212); background-color: rgb(30, 30, 30); font-family: Consolas, &amp;quot;Courier New&amp;quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;&quot;&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;color: rgb(220, 220, 220);&quot;&gt;{&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;color: rgb(212, 212, 212);&quot;&gt;&amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(156, 220, 254);&quot;&gt;&quot;deviceId&quot;&lt;/span&gt;&lt;span style=&quot;color: rgb(220, 220, 220);&quot;&gt;:&lt;/span&gt;&lt;span style=&quot;color: rgb(212, 212, 212);&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;color: rgb(206, 145, 120);&quot;&gt;&quot;Id da Camera&quot;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;color: rgb(220, 220, 220);&quot;&gt;}&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;align=center;" parent="1" vertex="1">
                    <mxGeometry x="2740" y="-3800" width="220" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="412" value="" style="edgeStyle=none;html=1;" parent="1" source="402" target="411" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="428" value="" style="edgeStyle=none;html=1;" parent="1" source="424" target="427" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="460" value="" style="edgeStyle=none;html=1;" parent="1" source="455" target="459" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="461" value="SIM" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="460" vertex="1" connectable="0">
                    <mxGeometry x="-0.0889" y="2" relative="1" as="geometry">
                        <mxPoint x="1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="463" value="" style="edgeStyle=none;html=1;" parent="1" source="459" target="462" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="465" value="" style="edgeStyle=none;html=1;" parent="1" source="462" target="464" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="462" value="Adciona valor no SET devices usando o deviceId como parametro" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="1" vertex="1">
                    <mxGeometry x="4450" y="-2910" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="499" style="edgeStyle=orthogonalEdgeStyle;html=1;dashed=1;dashPattern=12 12;endArrow=none;endFill=0;strokeWidth=3;" parent="1" source="496" target="498" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="4250" y="-2050" as="targetPoint"/>
                        <Array as="points">
                            <mxPoint x="5109" y="-2130"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="498" value="Kafka" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;fontSize=20;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="1712.5" y="-2160" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="503" style="edgeStyle=none;html=1;" parent="1" source="501" target="459" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="519" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;DeviceController&lt;/font&gt;" style="swimlane;horizontal=0;whiteSpace=wrap;html=1;startSize=30;" parent="1" vertex="1">
                    <mxGeometry x="3030" y="-3780" width="800" height="715" as="geometry"/>
                </mxCell>
                <mxCell id="394" value="Chama o deviceController&lt;div&gt;addDevice()&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="519" vertex="1">
                    <mxGeometry x="120" y="50" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="396" value="Verifica se recebeu o campo &quot;deviceId&quot; no body da requisição" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="519" vertex="1">
                    <mxGeometry x="120" y="190" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="397" value="" style="edgeStyle=none;html=1;" parent="519" source="394" target="396" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="398" value="Tratamento de Erros" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="519" vertex="1">
                    <mxGeometry x="350" y="155" width="140" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="399" value="" style="edgeStyle=none;html=1;" parent="519" source="396" target="398" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="400" value="Loga erro no console" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;rounded=1;strokeColor=#b85450;" parent="519" vertex="1">
                    <mxGeometry x="360" y="20" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="401" value="" style="edgeStyle=none;html=1;" parent="519" source="398" target="400" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="404" value="Não Recebeu&amp;nbsp;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;este campo,&lt;/span&gt;&lt;div&gt;&lt;span style=&quot;color: rgb(63, 63, 63); background-color: light-dark(#ffffff, var(--ge-dark-color, #121212));&quot;&gt;ou o campo não é uma string,&amp;nbsp;&lt;/span&gt;&lt;div&gt;ou o campo é uma string vazia.&lt;/div&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="401" vertex="1" connectable="0">
                    <mxGeometry x="-0.2667" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="406" value="Loga erro no Console" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;rounded=1;strokeColor=#b85450;" parent="519" vertex="1">
                    <mxGeometry x="590" y="120" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="407" value="" style="edgeStyle=none;html=1;" parent="519" source="398" target="406" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="408" value="ERRO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="407" vertex="1" connectable="0">
                    <mxGeometry x="-0.482" y="1" relative="1" as="geometry">
                        <mxPoint y="1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="402" value="Cria um objeto chamado result e define seu valor como o resultado da função deviceService.addDevice com o valor do deviceID sem espaços em branco no inico ou fim" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="519" vertex="1">
                    <mxGeometry x="510" y="360" width="220" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="403" value="" style="edgeStyle=none;html=1;" parent="519" source="398" target="402" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="405" value="Recebeu o Campo&amp;nbsp;&lt;div&gt;de forma correta&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="403" vertex="1" connectable="0">
                    <mxGeometry x="-0.1536" y="1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="427" value="Retrona uma mensagem de sucesso + o result em JSON&lt;div&gt;HTTP Code 201&lt;/div&gt;" style="whiteSpace=wrap;html=1;rounded=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="519" vertex="1">
                    <mxGeometry x="250" y="490" width="210" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="521" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;DeviceService (Thread Main)&lt;/font&gt;" style="swimlane;horizontal=0;whiteSpace=wrap;html=1;startSize=30;" parent="1" vertex="1">
                    <mxGeometry x="3860" y="-3790" width="800" height="1440" as="geometry"/>
                </mxCell>
                <mxCell id="411" value="Verifica se o deviceID já existe dentro Set devices" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="90" y="60" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="433" value="Retorna erro dizendo que dispositivo já existe" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;rounded=1;strokeColor=#b85450;" parent="521" vertex="1">
                    <mxGeometry x="190" y="180" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="431" value="deviceID" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="280" y="50" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="432" value="" style="edgeStyle=none;html=1;" parent="521" source="411" target="431" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="434" value="" style="edgeStyle=none;html=1;" parent="521" source="431" target="433" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="435" value="EXISTE" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="434" vertex="1" connectable="0">
                    <mxGeometry x="-0.0222" y="3" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="436" value="Manda uma mensagem para a Thead Secundaria (device-worker) passando:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;type: &#39;add-device&#39;,&lt;/li&gt;&lt;li&gt;deviceId&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="575" y="25" width="180" height="180" as="geometry"/>
                </mxCell>
                <mxCell id="437" value="" style="edgeStyle=none;html=1;" parent="521" source="431" target="436" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="438" value="NÃO&lt;div&gt;EXISTE&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="437" vertex="1" connectable="0">
                    <mxGeometry x="-0.2889" y="-4" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="459" value="Retorna para&amp;nbsp; DeviceService" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="600" y="1040" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="464" value="Retorna uma mensagem dizendo que o dispositivo foi adcionado e o evento em loop iniciado + deviceId" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="545" y="690" width="210" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="415" value="Pega a mensagem passada e utilzia de parametro para a função handleWorkerMessage()" style="whiteSpace=wrap;html=1;rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="290" y="590" width="190" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="417" value="Verifica qual o Type da Mensagem" style="whiteSpace=wrap;html=1;rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="310" y="790" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="418" value="" style="edgeStyle=none;html=1;" parent="521" source="415" target="417" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="419" value="Verificando Type" style="rhombus;whiteSpace=wrap;html=1;rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="240" y="1020" width="135" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="420" value="" style="edgeStyle=none;html=1;" parent="521" source="417" target="419" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="421" value="Executa outras mensagens" style="whiteSpace=wrap;html=1;rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="190" y="1250" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="422" value="" style="edgeStyle=none;html=1;" parent="521" source="419" target="421" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="423" value="SE O type&amp;nbsp;&lt;div&gt;FOR DIFERENTE&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="422" vertex="1" connectable="0">
                    <mxGeometry x="-0.297" y="1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="424" value="Loga no console que o evento foi enviado pelo dispositivo + deviceID + timestamp&amp;nbsp;" style="whiteSpace=wrap;html=1;rounded=1;" parent="521" vertex="1">
                    <mxGeometry x="90" y="790" width="150" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="425" value="" style="edgeStyle=none;html=1;" parent="521" source="419" target="424" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="426" value="SE O type FOR&lt;div&gt;&#39;event-sent&#39;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="425" vertex="1" connectable="0">
                    <mxGeometry x="-0.0857" y="4" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="413" value="Recebe a mensagem da thead secundaria&amp;nbsp; device-worker" style="rounded=1;whiteSpace=wrap;html=1;" parent="521" vertex="1">
                    <mxGeometry x="440" y="860" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="416" value="" style="edgeStyle=none;html=1;" parent="521" source="413" target="415" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="504" style="edgeStyle=none;html=1;" parent="521" source="464" target="413" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="554" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;Device-Worker (Thread Secundaria)&lt;/font&gt;" style="swimlane;horizontal=0;whiteSpace=wrap;html=1;startSize=30;" parent="1" vertex="1">
                    <mxGeometry x="4680" y="-3790" width="1680" height="1770" as="geometry"/>
                </mxCell>
                <mxCell id="439" value="Thead secundaria escuta a mensagem e extrai o type" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="310" y="40" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="445" value="Executa outras funções" style="whiteSpace=wrap;html=1;fillColor=#f8cecc;rounded=1;strokeColor=#b85450;" parent="554" vertex="1">
                    <mxGeometry x="780" y="40" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="443" value="Valor&amp;nbsp;&lt;div&gt;do type&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="520" y="30" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="444" value="" style="edgeStyle=none;html=1;" parent="554" source="439" target="443" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="446" value="" style="edgeStyle=none;html=1;" parent="554" source="443" target="445" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="447" value="SE O VALOR&lt;div&gt;FOR DIFERENTE&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="446" vertex="1" connectable="0">
                    <mxGeometry x="-0.1556" y="-1" relative="1" as="geometry">
                        <mxPoint y="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="448" value="Inicia a função startDeviceLoop, passando o deviceID da mensagem como parametro" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="480" y="315" width="170" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="449" value="" style="edgeStyle=none;html=1;" parent="554" source="443" target="448" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="450" value="SE O VALOR&lt;div&gt;FOR&lt;/div&gt;&lt;div&gt;&#39;add-device&#39;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="449" vertex="1" connectable="0">
                    <mxGeometry x="-0.3742" y="1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="451" value="Verifica se o valor de deviceID já existe no MAP devices" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="710" y="345" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="452" value="" style="edgeStyle=none;html=1;" parent="554" source="448" target="451" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="455" value="valor do deviceID&lt;div&gt;existe no MAP devices?&lt;/div&gt;" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="460" y="550" width="145" height="140" as="geometry"/>
                </mxCell>
                <mxCell id="456" value="" style="edgeStyle=none;html=1;" parent="554" source="451" target="455" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="558" value="" style="edgeStyle=none;html=1;" parent="554" source="556" target="557" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="556" value="Configurações do Modulo" style="rounded=1;whiteSpace=wrap;html=1;" parent="554" vertex="1">
                    <mxGeometry x="120" y="130" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="560" value="" style="edgeStyle=none;html=1;" parent="554" source="557" target="559" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="557" value="Kafka" style="whiteSpace=wrap;html=1;rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="50" y="210" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="562" value="" style="edgeStyle=none;html=1;" parent="554" source="559" target="561" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="559" value="Producer" style="whiteSpace=wrap;html=1;rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="170" y="290" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="564" value="" style="edgeStyle=none;html=1;" parent="554" source="561" target="563" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="561" value="KafkaAdmin" style="whiteSpace=wrap;html=1;rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="40" y="360" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="563" value="MAP devices" style="whiteSpace=wrap;html=1;rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="180" y="435" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="457" value="Inicia uma função de loop assincrono" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="710" y="595" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="458" value="" style="edgeStyle=none;html=1;" parent="554" source="455" target="457" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="466" value="NÃO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="458" vertex="1" connectable="0">
                    <mxGeometry x="-0.2177" y="-4" relative="1" as="geometry">
                        <mxPoint y="-1" as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="467" value="Chama a função emitFakeEvent e passa como parametro o deviceId" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="700" y="710" width="130" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="468" value="" style="edgeStyle=none;html=1;" parent="554" source="457" target="467" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="469" value="Verifica se&amp;nbsp; existe alguma conexão&amp;nbsp;&lt;span style=&quot;color: rgb(0, 0, 0);&quot;&gt;existente&amp;nbsp;&lt;/span&gt;com o kafka" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="860" y="595" width="135" height="75" as="geometry"/>
                </mxCell>
                <mxCell id="470" value="" style="edgeStyle=none;html=1;" parent="554" source="467" target="469" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="473" value="Busca as informações existente nas variaveis do sistema:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;kafka.topic = .env.topic ou `device-events`&lt;/li&gt;&lt;li&gt;kafka.tetentionMS =&amp;nbsp; .env.KAFKA_RETENTION_MS ou 3600000&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="1030" y="330" width="330" height="150" as="geometry"/>
                </mxCell>
                <mxCell id="476" value="Faz a conexão do PRODUCER do kafka" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="1480" y="375" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="478" value="Define o estado de conexão como verdadeiro" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="1480" y="515" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="480" value="Loga no console que o Kafka PRODUCER esta conectado + Retenção de tempo do topico" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="1450" y="630" width="180" height="105" as="geometry"/>
                </mxCell>
                <mxCell id="471" value="Conexão com o Kafka" style="rhombus;whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="1150" y="587.5" width="80" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="477" value="" style="edgeStyle=none;html=1;" parent="554" source="473" target="476" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="479" value="" style="edgeStyle=none;html=1;" parent="554" source="476" target="478" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="481" value="" style="edgeStyle=none;html=1;" parent="554" source="478" target="480" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="472" value="" style="edgeStyle=none;html=1;" parent="554" source="469" target="471" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="474" value="" style="edgeStyle=none;html=1;" parent="554" source="471" target="473" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="475" value="NÃO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="474" vertex="1" connectable="0">
                    <mxGeometry x="-0.3944" y="-1" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="482" style="edgeStyle=none;html=1;" parent="554" source="480" target="471" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="483" value="Cria um objeto de Payload com o return da função generateEventPayload() passando o deviceId como parametro" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="1100" y="735" width="180" height="132.5" as="geometry"/>
                </mxCell>
                <mxCell id="484" value="" style="edgeStyle=none;html=1;" parent="554" source="471" target="483" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="485" value="SIM" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="484" vertex="1" connectable="0">
                    <mxGeometry x="-0.2167" y="-3" relative="1" as="geometry">
                        <mxPoint as="offset"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="486" value="Gera um timestamp" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="1130" y="900" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="487" value="" style="edgeStyle=none;html=1;" parent="554" source="483" target="486" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="488" value="Gera uma imagem criada pelo imageGenerator.generateImage(), passando como parametro o deviceId" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="1090" y="1080" width="200" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="489" value="" style="edgeStyle=none;html=1;" parent="554" source="486" target="488" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="490" value="Verifica se o sistema esta guardando uma copia das imagens localmente atravez de um if" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="842.5" y="1090" width="170" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="491" value="" style="edgeStyle=none;html=1;" parent="554" source="488" target="490" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="492" value="Isso não vai alterar o fluxo do nosso sistema" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="554" vertex="1">
                    <mxGeometry x="820" y="975" width="140" height="75" as="geometry"/>
                </mxCell>
                <mxCell id="493" style="edgeStyle=none;html=1;dashed=1;dashPattern=12 12;endArrow=none;endFill=0;" parent="554" source="490" target="492" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="494" value="Retorna para o Payload:&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;deviceID&lt;/li&gt;&lt;li&gt;timestamp&lt;/li&gt;&lt;li&gt;value = um valor aleatorio decimal entre 0 e 1&lt;/li&gt;&lt;li&gt;tipo do evento = &#39;camera_capture&#39;&lt;/li&gt;&lt;li&gt;image = informações da imagem&lt;/li&gt;&lt;li&gt;device_text_crop&lt;/li&gt;&lt;li&gt;backgroun_colors&lt;/li&gt;&lt;li&gt;Metadados&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="790" y="1275" width="265" height="230" as="geometry"/>
                </mxCell>
                <mxCell id="495" value="" style="edgeStyle=none;html=1;" parent="554" source="490" target="494" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="501" value="Envia uma mensagem para a Thread Main (DeviceService):&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;type = &#39;event-sent&#39;&lt;/li&gt;&lt;li&gt;deviceId&amp;nbsp;&lt;/li&gt;&lt;li&gt;timestamp = Payload.timestamp&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="300" y="920" width="230" height="240" as="geometry"/>
                </mxCell>
                <mxCell id="496" value="Envia o Payload para o Kafka atraves do PRODUCER:&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;topic&lt;/li&gt;&lt;li&gt;message&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;valores da mensagem&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;ul&gt;&lt;li&gt;key = config.kafka.topic = .env.KAFKA_TOPIC ou &quot;device-events&quot;&lt;/li&gt;&lt;li&gt;value = Payload convertido em JSON&lt;/li&gt;&lt;li&gt;timestampo = tempo de agora&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="whiteSpace=wrap;html=1;fillColor=light-dark(#FFFFFF,#EDEDED);rounded=1;" parent="554" vertex="1">
                    <mxGeometry x="282.5" y="1240" width="292.5" height="300" as="geometry"/>
                </mxCell>
                <mxCell id="497" value="" style="edgeStyle=none;html=1;" parent="554" source="494" target="496" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="502" value="" style="edgeStyle=none;html=1;" parent="554" source="496" target="501" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="440" value="" style="edgeStyle=none;html=1;" parent="1" source="436" target="439" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="257" style="edgeStyle=none;html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="1" source="253" target="498" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="1222.868852459017" y="-2190" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="60" value="Mongo" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0050ef;strokeColor=#001DBC;fontColor=#ffffff;fontSize=20;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="2405" y="-700" width="120" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="94" style="html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="1" source="93" target="60" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="100" style="html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="1" source="95" target="60" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="107" style="html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="1" source="105" target="60" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="121" style="html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="1" source="118" target="60" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="135" style="html=1;endArrow=none;endFill=0;dashed=1;dashPattern=12 12;strokeWidth=2;" parent="1" source="127" target="60" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="284" style="edgeStyle=none;html=1;dashed=1;dashPattern=12 12;endArrow=none;endFill=0;strokeWidth=2;" parent="1" source="277" target="60" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="2294.5901639344265" y="-1150" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>